var __extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},annie;!function(e){var t=laya.display.Sprite,a=laya.events.Event,n=function(){function e(){var e=this;e.frameChildList=new Array,e.keyIndex=0,e.eventName="",e.soundName="",e.soundScene="",e.soundTimes=1}return e.prototype.setDisplayInfo=function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null);var n=this,r={display:e,x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,alpha:1};Flash2x.d(r,t,a),n.frameChildList.push(r)},e.prototype.setGraphicInfo=function(e,t,a){var n=this,r=n.frameChildList.length-1;n.frameChildList[r].graphicInfo={loopType:e,firstFrame:t,parentFrameIndex:a}},e}(),r=function(r){function o(){r.call(this),this._timeline=[],this.floatView=new t,this.currentFrame=1,this.isPlaying=!0,this.isFront=!0,this.totalFrames=1,this._scriptLayer=[],this._labelFrame={},this._frameLabel={},this._isNeedUpdateChildren=!0,this._isUpdateFrame=!1,this._isF2xMc=!0,this._mouseEvent=function(e){e.type==a.MOUSE_DOWN?this.gotoAndStop(2):this.gotoAndStop(1)};var e=this;e.addChild(e.floatView)}return __extends(o,r),o.prototype.stop=function(){var e=this;e.isPlaying=!1},o.prototype.as=function(e,t){var a=this;a._scriptLayer[t]=e},o.prototype.addFrameScript=function(e,t){var a=this;a.as(t,e)},o.prototype.removeFrameScript=function(e){var t=this;t._scriptLayer[e]&&(t._scriptLayer[e]=null)},o.prototype.a=function(){var e=this;return e._currentLayer=[],e._timeline.unshift(e._currentLayer),e},o.prototype.b=function(e){var t=this;t._currentLayerFrame=new n,t._currentLayerFrame.keyIndex=t._currentLayer.length;for(var a=0;e>a;a++)t._currentLayer.push(t._currentLayerFrame);return t.totalFrames<t._currentLayer.length&&(t.totalFrames=t._currentLayer.length),t},o.prototype.c=function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null);var n=this;return n._currentLayerFrame.setDisplayInfo(e,t,a),n},o.prototype.g=function(e,t,a){var n=this;return n._currentLayerFrame.setGraphicInfo(e,t,a),n},o.prototype.setGraphicInfo=function(e){var t=this;t._graphicInfo=e},o.prototype.initButton=function(){var e=this;e.totalFrames>1&&(e.gotoAndStop(1),e.on(a.MOUSE_DOWN,e,e._mouseEvent.bind(e)),e.on(a.MOUSE_UP,e,e._mouseEvent.bind(e)),e.on(a.MOUSE_OUT,e,e._mouseEvent.bind(e)))},o.prototype.d=function(e,t){var a=this;return a._labelFrame[e]=t+1,a._frameLabel[t+1]=e,a},o.prototype.getCurrentLabel=function(){var e=this;return e._frameLabel[e.currentFrame]?e._frameLabel[e.currentFrame]:""},o.prototype.e=function(e){var t=this;return t._currentLayerFrame.eventName=e,t},o.prototype.f=function(e,t,a){var n=this;return n._currentLayerFrame.soundName=t,n._currentLayerFrame.soundScene=e,n._currentLayerFrame.soundTimes=a,n},o.prototype.nextFrame=function(){var e=this;e.currentFrame<e.totalFrames&&(e.currentFrame++,e._isNeedUpdateChildren=!0),e.isPlaying=!1,e._isUpdateFrame=!1},o.prototype.prevFrame=function(){var e=this;e.currentFrame>1&&(e.currentFrame--,e._isNeedUpdateChildren=!0),e.isPlaying=!1,e._isUpdateFrame=!1},o.prototype.gotoAndStop=function(e){var t=this;t.isPlaying=!1;var a;"string"==typeof e?void 0!=t._labelFrame[e]?a=t._labelFrame[e]:console.log("未找到帧标签叫'"+e+"'的帧"):"number"==typeof e&&(e>t.totalFrames&&(e=t.totalFrames),1>e&&(e=1),a=e),t.currentFrame!=a&&(t.currentFrame=a,t._isNeedUpdateChildren=!0,t._isUpdateFrame=!1)},o.prototype.play=function(e){void 0===e&&(e=!0);var t=this;t.isPlaying=!0,void 0==e?t.isFront=!0:t.isFront=e,t._isUpdateFrame=!0},o.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=!0);var a=this;void 0==t?a.isFront=!0:a.isFront=t,a.isPlaying=!0;var n;"string"==typeof e?void 0!=a._labelFrame[e]?n=a._labelFrame[e]:console.log("未找到帧标签叫'"+e+"'的帧"):"number"==typeof e&&(e>a.totalFrames&&(e=a.totalFrames),1>e&&(e=1),n=e),a.currentFrame!=n&&(a.currentFrame=n,a._isUpdateFrame=!1,a._isNeedUpdateChildren=!0)},o.prototype.setFrameChild=function(e,t){e._donotUpdateinMC=e._donotUpdateinMC||{};for(var a in t)null!=t[a]?e._donotUpdateinMC[a]=t[a]:delete e._donotUpdateinMC[t[a]]},o.prototype.render=function(t,n,o,i){void 0===i&&(i=!1);var s=this;if(s.visible){if(s._graphicInfo){var d=s.parent.currentFrame?s.parent.currentFrame:1,l=1,c=s._graphicInfo.parentFrameIndex+1,p=s._graphicInfo.firstFrame+1;"play once"==s._graphicInfo.loopType?d-c>=0&&(l=d-c+p,l>s.totalFrames&&(l=s.totalFrames)):"loop"==s._graphicInfo.loopType?(d-c>=0&&(l=(d-c+p)%s.totalFrames),0==l&&(l=s.totalFrames)):l=p,s.currentFrame!=l&&(s.currentFrame=l,s._isNeedUpdateChildren=!0),s.isPlaying=!1}else s.isPlaying&&s._isUpdateFrame&&(s.isFront?(s.currentFrame++,s.currentFrame>s.totalFrames&&(s.currentFrame=1)):(s.currentFrame--,s.currentFrame<1&&(s.currentFrame=s.totalFrames)),s._isNeedUpdateChildren=!0);if(s._isUpdateFrame=!0,s._isNeedUpdateChildren){for(var u=-1,h=s._timeline.length,m=0,v=null,_=null,f=null,y=0,g=s._childs,x=[],F=0;F<s._childs.length-1;F++)g[F]._parent=null;s._childs=[];for(var F=0;h>F;F++)if(m=s._timeline[F].length,s.currentFrame<=m){if(v=s._timeline[F][s.currentFrame-1],void 0==v)continue;if(v.keyIndex==s.currentFrame-1&&(""!=v.soundName&&Flash2x.getMediaByName(v.soundScene,v.soundName).play(0,v.soundTimes),""!=v.eventName&&s.hasListener("onCallFrame"))){var C=new a;C.setTo("onCallFrame",s,s),C.data={frameIndex:s.currentFrame,frameName:v.eventName},x.push(C)}y=v.frameChildList.length;for(var S=0;y>S;S++){if(f=v.frameChildList[S],_=f.display,_.x=f.x,_.y=f.y,_.scaleX=f.scaleX,_.scaleY=f.scaleY,_.rotation=f.rotation,_.skewX=f.skewX,_.skewY=f.skewY,_.alpha=f.alpha,_.mask&&(_.mask.gotoAndStop(s.currentFrame),_.mask.render(t,n,o,!0),_.mask._childs[0]&&(_.mask._childs[0].x-=_.x,_.mask._childs[0].y-=_.y)),f.filters?_.filters=f.filters:_.filters=null,f.graphicInfo?_._graphicInfo=f.graphicInfo:_._graphicInfo&&(_._graphicInfo=null),void 0!=_._donotUpdateinMC)for(var T in _._donotUpdateinMC)void 0!=_._donotUpdateinMC[T]&&(_[T]=_._donotUpdateinMC[T]);u=g.indexOf(_),0>u?s.addChild(_):(_._parent=s,s._childs.push(_),g.splice(u,1))}}s._isNeedUpdateChildren=!1;for(var b=g.length,F=0;b>F;F++)g[F]._parent=s,s._childs.push(g[F]),s.removeChild(g[F]),e.MovieClip._onInitF2xMc(g[F]);if(i||(s._childs.push(s.floatView),r.prototype.render.call(this,t,n,o)),s._childChanged(),(1==s.currentFrame&&!s.isFront||s.currentFrame==s.totalFrames&&s.isFront)&&s.hasListener("onEndFrame")){var w=new a;w.setTo("onEndFrame",s,s),w.data={frameIndex:s.currentFrame,frameName:1==s.currentFrame?"firstFrame":"endFrame"},x.push(w)}b=x.length;for(var F=0;b>F;F++)s.event(x[F].type,x[F]);void 0!=s._scriptLayer[s.currentFrame-1]&&s._scriptLayer[s.currentFrame-1]()}else i||r.prototype.render.call(this,t,n,o)}},o._onInitF2xMc=function(t){if(t._isF2xMc&&(t.currentFrame=1,t.isPlaying=!0,t.isFront=!0,t._isNeedUpdateChildren=!0,t._isUpdateFrame=!1),t._childs)for(var a=0;a<t._childs.length;a++)e.MovieClip._onInitF2xMc(t._childs[a])},o}(t);e.MovieClip=r}(annie||(annie={}));var annie;!function(e){var t=laya.maths.Rectangle,a=laya.resource.Texture,n=function(){function e(){this._command=[],this._cacheImg=window.document.createElement("canvas"),this.texture=new a,this.rect=new t,this.beginRadialGradientFill=function(t,a,n){this._fill(e.getGradientColor(t,a,n))},this.beginRadialGradientStroke=function(t,a,n,r,o,i,s){void 0===r&&(r=1),void 0===o&&(o="butt"),void 0===i&&(i="miter"),void 0===s&&(s=10),this._stroke(e.getGradientColor(t,a,n),r,o,i,s)},this.decodePath=function(t){for(var a,n=this,r=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],o=[2,2,4,6,0],i=0,s=t.length,d=0,l=0,c=e.BASE_64;s>i;){var p=t.charAt(i),u=c[p],h=u>>3,m=r[h];if(!m||3&u)throw"bad path data (@"+i+"): "+p;var v=o[h];h||(d=l=0),a=[],i++;for(var _=(u>>2&1)+2,f=0;v>f;f++){var y=c[t.charAt(i)],g=y>>5?-1:1;y=(31&y)<<6|c[t.charAt(i+1)],3==_&&(y=y<<6|c[t.charAt(i+2)]),y=g*y/10,f%2?d=y+=d:l=y+=l,a[f]=y,i+=_}n.addDraw(m,a)}}}return e.getGradientColor=function(t,a,n){var r,o=e._canvas.getContext("2d");r=4==n.length?o.createLinearGradient(n[0],n[1],n[2],n[3]):o.createRadialGradient(n[0],n[1],n[2],n[3],n[4],n[5]);for(var i=0,s=t.length;s>i;i++)r.addColorStop(a[i],t[i]);return r},e.getBitmapStyle=function(t){var a=e._canvas.getContext("2d");return a.createPattern(t,"repeat")},e.getRGBA=function(e,t){if(0==e.indexOf("0x")&&(e=e.replace("0x","#")),e.length<7&&(e="#000000"),1!=t){var a=parseInt("0x"+e.substr(1,2)),n=parseInt("0x"+e.substr(3,2)),r=parseInt("0x"+e.substr(5,2));e="rgba("+a+","+n+","+r+","+t+")"}return e},e.prototype.addDraw=function(e,t){var a=this;a._command.push([1,e,t])},e.prototype.drawRoundRect=function(e,t,a,n,r,o,i,s){void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0);var d=(n>a?a:n)/2,l=0,c=0,p=0,u=0;0>r&&(r*=l=-1),r>d&&(r=d),0>o&&(o*=c=-1),o>d&&(o=d),0>s&&(s*=p=-1),s>d&&(s=d),0>i&&(i*=u=-1),i>d&&(i=d);var h=this._command;h.push([1,"moveTo",[e+a-o,t]]),h.push([1,"arcTo",[e+a+o*c,t-o*c,e+a,t+o,o]]),h.push([1,"lineTo",[e+a,t+n-s]]),h.push([1,"arcTo",[e+a+s*p,t+n+s*p,e+a-s,t+n,s]]),h.push([1,"lineTo",[e+i,t+n]]),h.push([1,"arcTo",[e-i*u,t+n+i*u,e,t+n-i,i]]),h.push([1,"lineTo",[e,t+r]]),h.push([1,"arcTo",[e-r*l,t-r*l,e+r,t,r]]),h.push([1,"closePath",[]])},e.prototype.moveTo=function(e,t){this._command.push([1,"moveTo",[e,t]])},e.prototype.lineTo=function(e,t){this._command.push([1,"lineTo",[e,t]])},e.prototype.arcTo=function(e,t){this._command.push([1,"arcTo",[e,t]])},e.prototype.quadraticCurveTo=function(e,t,a,n){this._command.push([1,"quadraticCurveTo",[e,t,a,n]])},e.convertToImage=function(t){var a=t.width,n=t.height,r=t.bitmap._image;if(a==r.width&&n==r.height)return r;var o=e._canvas;o.width=a,o.height=n;var i=o.getContext("2d");i.clearRect(0,0,a,n),i.drawImage(t.bitmap._image,t.offsetX,t.offsetY,a,n,0,0,a,n);var s=window.document.createElement("img");return s.src=o.toDataURL("image/png"),s},e.prototype.bezierCurveTo=function(e,t,a,n,r,o){this._command.push([1,"bezierCurveTo",[e,t,a,n,r,o]])},e.prototype.closePath=function(){this._command.push([1,"closePath",[]])},e.prototype.drawRect=function(e,t,a,n){var r=this._command;r.push([1,"moveTo",[e,t]]),r.push([1,"lineTo",[e+a,t]]),r.push([1,"lineTo",[e+a,t+n]]),r.push([1,"lineTo",[e,t+n]]),r.push([1,"closePath",[]])},e.prototype.drawArc=function(e,t,a,n,r){this._command.push([1,"arc",[e,t,a,n/180*Math.PI,r/180*Math.PI]])},e.prototype.drawCircle=function(e,t,a){this._command.push([1,"arc",[e,t,a,0,2*Math.PI]])},e.prototype.drawEllipse=function(e,t,a,n){var r=.5522848,o=a/2*r,i=n/2*r,s=e+a,d=t+n,l=e+a/2,c=t+n/2,p=this._command;p.push([1,"moveTo",[e,c]]),p.push([1,"bezierCurveTo",[e,c-i,l-o,t,l,t]]),p.push([1,"bezierCurveTo",[l+o,t,s,c-i,s,c]]),p.push([1,"bezierCurveTo",[s,c+i,l+o,d,l,d]]),p.push([1,"bezierCurveTo",[l-o,d,e,c+i,e,c]])},e.prototype.clear=function(){var e=this;e._command=[]},e.prototype.beginFill=function(e){this._fill(e)},e.prototype.beginLinearGradientFill=function(t,a,n){this._fill(e.getGradientColor(t,a,n))},e.prototype.beginBitmapFill=function(t,a){var n=this;a&&(n._isBitmapFill=a),n._fill(e.getBitmapStyle(t))},e.prototype._fill=function(e){var t=this._command;t.push([0,"fillStyle",e]),t.push([1,"beginPath",[]])},e.prototype.beginStroke=function(e,t,a,n,r){void 0===t&&(t=1),void 0===a&&(a=""),void 0===n&&(n=""),void 0===r&&(r=0),this._stroke(e,t,a,n,r)},e.prototype.beginLinearGradientStroke=function(t,a,n,r,o,i,s){void 0===r&&(r=1),void 0===o&&(o="butt"),void 0===i&&(i="miter"),void 0===s&&(s=10),this._stroke(e.getGradientColor(t,a,n),r,o,i,s)},e.prototype.beginBitmapStroke=function(t,a,n,r,o,i){void 0===n&&(n=1),void 0===r&&(r="butt"),void 0===o&&(o="miter"),void 0===i&&(i=10);var s=this;a&&(s._isBitmapStroke=a),s._stroke(e.getBitmapStyle(t),n,r,o,i)},e.prototype._stroke=function(e,t,a,n,r){var o=this._command;o.push([0,"lineWidth",t]),o.push([0,"lineCap",a]),o.push([0,"lineJoin",n]),o.push([0,"miterLimit",r]),o.push([0,"strokeStyle",e]),o.push([1,"beginPath",[]])},e.prototype.endFill=function(){var e=this,t=e._command,a=e._isBitmapFill;a&&t.push([2,"setTransform",[a.a,a.b,a.c,a.d,a.tx,a.ty]]),t.push([1,"fill",[]]),a&&(e._isBitmapFill=null)},e.prototype.endStroke=function(){var e=this,t=e._command,a=e._isBitmapStroke;a&&t.push([2,"setTransform",[a.a,a.b,a.c,a.d,a.tx,a.ty]]),t.push([1,"stroke",[]]),a&&(e._isBitmapStroke=null)},e.prototype.updateTexture=function(){var e,t,n,r,o,i=this,s=i._command.length;if(s>0){var d=void 0,l=0,c=0,p=0;for(o=0;s>o;o++)if(d=i._command[o],1==d[0]){if("moveTo"==d[1]||"lineTo"==d[1]||"arcTo"==d[1]||"bezierCurveTo"==d[1])void 0==e&&(e=d[2][0]),void 0==t&&(t=d[2][1]),void 0==n&&(n=d[2][0]),void 0==r&&(r=d[2][1]),"bezierCurveTo"==d[1]?(e=Math.min(e,d[2][0],d[2][2],d[2][4]),t=Math.min(t,d[2][1],d[2][3],d[2][5]),n=Math.max(n,d[2][0],d[2][2],d[2][4]),r=Math.max(r,d[2][1],d[2][3],d[2][5]),l=d[2][4],c=d[2][5]):(e=Math.min(e,d[2][0]),t=Math.min(t,d[2][1]),n=Math.max(n,d[2][0]),r=Math.max(r,d[2][1]),l=d[2][0],c=d[2][1]);else if("quadraticCurveTo"==d[1]){var u=.5*(l+d[2][0]),h=.5*(l+d[2][1]),m=.5*(d[2][0]+d[2][2]),v=.5*(d[2][1]+d[2][3]);void 0==e&&(e=u),void 0==t&&(t=h),void 0==n&&(n=u),void 0==r&&(r=h),e=Math.min(e,u,m,d[2][2]),t=Math.min(t,h,v,d[2][3]),n=Math.max(n,u,m,d[2][2]),r=Math.max(r,h,v,d[2][3]),l=d[2][2],c=d[2][3]}else if("arc"==d[1]){var _=d[2][0],f=d[2][1],y=d[2][2],g=_-y,x=f-y,F=_+y,C=f+y;void 0==e&&(e=g),void 0==t&&(t=x),void 0==n&&(n=F),void 0==r&&(r=C),e=Math.min(e,g),t=Math.min(t,x),n=Math.max(n,F),r=Math.max(r,C)}}else"lineWidth"==d[1]&&p<d[2]&&(p=d[2]);if(void 0!=e){e-=p>>1,t-=p>>1,n+=p>>1,r+=p>>1;var S=n-e,T=r-t;i.rect.x=e,i.rect.y=t,i.rect.width=S,i.rect.height=T;var b=i._cacheImg,w=b.getContext("2d");b.width=S,b.height=T,b.style.width=S/devicePixelRatio+"px",b.style.height=T/devicePixelRatio+"px",w.clearRect(0,0,S,T),w.setTransform(1,0,0,1,-e,-t);for(var L,R=i._command,I=R.length,k=0;I>k;k++)if(L=R[k],L[0]>0){var E=L[2].length;if(0==E)w[L[1]]();else if(2==E)w[L[1]](L[2][0],L[2][1]);else if(4==E)w[L[1]](L[2][0],L[2][1],L[2][2],L[2][3]);else if(5==E)w[L[1]](L[2][0],L[2][1],L[2][2],L[2][3],L[2][4]);else if(6==E){var M=L[2][4],N=L[2][5];2==L[0]&&(M-=e,N-=t),w[L[1]](L[2][0],L[2][1],L[2][2],L[2][3],M,N)}}else w[L[1]]=L[2]}else i._cacheImg.width=0,i._cacheImg.height=0,i.rect.x=0,i.rect.y=0,i.rect.width=0,i.rect.height=0}else i._cacheImg.width=0,i._cacheImg.height=0,i.rect.x=0,i.rect.y=0,i.rect.width=0,i.rect.height=0;var U=new a;return U.load(i._cacheImg.toDataURL()),U},e.prototype.changeColor=function(e){for(var t=this,a=t._command.length,n=t._command,r=0;a>r;r++)0==n[r][0]&&("fillStyle"==n[r][1]&&e.fillColor&&n[r][2]!=e.fillColor&&(n[r][2]=e.fillColor),"strokeStyle"==n[r][1]&&e.strokeColor&&n[r][2]!=e.strokeColor&&(n[r][2]=e.strokeColor),"lineWidth"==n[r][1]&&e.lineWidth&&n[r][2]!=e.lineWidth&&(n[r][2]=e.lineWidth));t.updateTexture()},e._canvas=document.createElement("canvas"),e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e}();e.Shape=n}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,a){e.call(this),this.media=null,this.type="",this._loop=0;var n=this;"string"==typeof t?(n.media=document.createElement(a),n.media.src=t):n.media=t,n._SBWeixin=n._weixinSB.bind(n),n.media.addEventListener("ended",function(){n._loop--,n._loop>0?n.play(0,n._loop):n.media.pause(),n.event("onPlayEnd")}.bind(n),!1),n.type=a.toLocaleUpperCase(),n.media.addEventListener("timeupdate",function(){n.event("onPlayUpdate",{currentTime:n.media.currentTime})},!1)}return __extends(t,e),t.prototype.play=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);var a=this;a._loop=t;try{a.media.currentTime=e}catch(n){console.log(n)}try{WeixinJSBridge.invoke("getNetworkType",{},a._SBWeixin)}catch(n){a.media.play()}},t.prototype._weixinSB=function(){this.media.play()},t.prototype.stop=function(){this.media.pause(),this.media.currentTime=0},t.prototype.pause=function(e){void 0===e&&(e=!0),e?this.media.pause():this.media.play()},t}(laya.events.EventDispatcher);e.Media=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){e.call(this,t,"Audio")}return __extends(t,e),t}(e.Media);e.Sound=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,a,n){void 0===a&&(a=0),void 0===n&&(n=0),e.call(this,t,"Video");var r=this;r.media.setAttribute("playsinline","true"),r.media.setAttribute("webkit-playsinline","true"),r.media.setAttribute("x-webkit-airplay","true"),r.media.setAttribute("x5-video-player-type","h5"),r.media.poster="",r.media.preload="auto",r.media.controls=!1,a&&n&&(r.media.width=a,r.media.height=n)}return __extends(t,e),t}(e.Media);e.Video=t}(annie||(annie={}));var annie;!function(e){var t=laya.events.EventDispatcher,a=laya.events.Event;e.Eval=eval.bind(window);var n=function(t){function n(){t.call(this),this.headers=[],this.responseType=null,this.url="",this.method="get",this.data=null,this._fqs=function(e,t){var a=[];if(e)for(var n in e)a.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t&&(a=a.concat(t)),a.join("&")},this._fus=function(e,t){var a=this;if(null==t||""==t)return e;var n=[],r=e.indexOf("?");if(-1!=r){var o=e.slice(r+1);return n=n.concat(o.split("&")),e.slice(0,r)+"?"+a._fqs(t,n)}return e+"?"+a._fqs(t,n)}}return __extends(n,t),n.prototype.loadCancel=function(){var e=this;e._req&&e._req.abort()},n.prototype.load=function(t,n){void 0===n&&(n="form");var r=this;if(r.loadCancel(),null==r.responseType||""==r.responseType){var o=t.split("."),i=o[o.length-1],s=i.split("?")[0].toLocaleLowerCase();"mp3"==s||"ogg"==s||"wav"==s?r.responseType="sound":"jpg"==s||"jpeg"==s||"png"==s||"gif"==s?r.responseType="image":"css"==s?r.responseType="css":"mp4"==s?r.responseType="video":"svg"==s?r.responseType="svg":"xml"==s?r.responseType="xml":"json"==s?r.responseType="json":"txt"==s?r.responseType="text":"js"==s||"swf"==s?r.responseType="js":r.responseType="unKnow"}var d=null;r._req?d=r._req:(r._req=new XMLHttpRequest,d=r._req,d.withCredentials=!1,d.onprogress=function(e){!e||e.loaded>0&&0==e.total||r.event(a.PROGRESS,{loadedBytes:e.loaded,totalBytes:e.total})},d.onerror=function(e){if(l++,l>3)r.event(a.ERROR,{id:2,msg:e.message});else if(d.abort(),r.data)if("form"==n)d.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8"),d.send(r._fqs(r.data,null));else{var t="application/json";"json"!=n&&(t="multipart/form-data"),d.setRequestHeader("Content-type",t+";charset=UTF-8"),d.send(r.data)}else d.send()},d.onreadystatechange=function(t){var n=t.target;if(4==n.readyState)if(200==d.status){var o=new a;o.setTo(a.COMPLETE,r,r);try{var i=n.response;o.data={type:r.responseType,response:null};var s=void 0;switch(r.responseType){case"css":s=document.createElement("link"),s.rel="stylesheet",s.href=r.url;break;case"image":s=new laya.resource.Texture,s.load(r.url);break;case"sound":case"video":var l;"sound"==r.responseType?(l=document.createElement("AUDIO"),s=new e.Sound(l)):"video"==r.responseType&&(l=document.createElement("VIDEO"),s=new e.Video(l)),l.preload=!0,l.src=r.url;break;case"json":s=JSON.parse(i);break;case"js":s="JS_CODE",e.Eval(i);break;case"text":case"unKnow":case"xml":default:s=i}o.data.response=s,r.data=null,r.responseType=""}catch(o){r.event(a.ERROR,{id:1,msg:"服务器返回信息有误"})}r.event(o.type,o)}else r.event(a.ERROR,{id:0,msg:"访问地址不存在"})});var l=0;if(r.data&&"get"==r.method.toLocaleLowerCase()?(r.url=r._fus(t,r.data),r.data=null):r.url=t,"image"==r.responseType||"sound"==r.responseType||"video"==r.responseType?d.responseType="blob":d.responseType="text",d.open(r.method,r.url,!0),r.headers.length>0){for(var c=0;c<r.headers.length;c+=2)d.setRequestHeader(r.headers[c],r.headers[c+1]);r.headers.length=0}if(r.data)if("form"==n)d.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8"),d.send(r._fqs(r.data,null));else{var p="application/json";"json"!=n&&(p="multipart/form-data"),d.setRequestHeader("Content-type",p+";charset=UTF-8"),d.send(r.data)}else d.send()},n.prototype.addHeader=function(e,t){this.headers.push(e,t)},n}(t);e.URLLoader=n}(annie||(annie={}));var Flash2x;!function(Flash2x){function _loadConfig(){_JSONQueue.load(_domain+"resource/"+_loadSceneNames[_loadIndex]+"/"+_loadSceneNames[_loadIndex]+".res.json?t="+_time)}function onCFGComplete(e){var t=e.data.response;_currentConfig.push(t),_totalLoadRes+=t.length,_loadIndex++,_loadSceneNames[_loadIndex]?_loadConfig():(_loadIndex=0,_loadSinglePer=1/_totalLoadRes,_loadRes())}function _onRESProgress(e){_progressCallback&&_progressCallback(100*(_loadPer+e.loadedBytes/e.totalBytes*_loadSinglePer)>>0)}function _onRESComplete(e){var t=_loadSceneNames[_loadIndex];if(_isReleased){var a=Flash2x,n=a[t+"Res"];for(var r in n){var o;n[r].indexOf("audio/")>0?o=new annie.Sound(n[r]):n[r].indexOf("image/")>0?(o=new Texture,o.load(n[r])):o=JSON.parse(n[r]),res[t][r]=o}delete a[t+"Res"]}else if("js"!=e.data.type&&"css"!=e.data.type){var i=_currentConfig[_loadIndex][0].id;res[t][i]=e.data.response}_checkComplete()}function _checkComplete(){if(_loadedLoadRes++,_loadPer=_loadedLoadRes/_totalLoadRes,_currentConfig[_loadIndex].shift(),_currentConfig[_loadIndex].length>0)_loadRes();else{var e={};e.sceneName=_loadSceneNames[_loadIndex],_loadIndex++,e.sceneId=_loadIndex,e.sceneTotal=_loadSceneNames.length,_loadIndex==_loadSceneNames.length?(_isLoading=!1,_completeCallback(e)):(_completeCallback(e),_loadRes())}}function _loadRes(){var e=_domain+_currentConfig[_loadIndex][0].src;_isReleased&&(_loaderQueue.responseType="js",e+="?v="+_isReleased),_loaderQueue.load(e)}function isLoadedScene(e){return void 0!=res[e]&&null!=res[e]}function unLoadScene(sceneName){delete res[sceneName];var scene=eval(sceneName);for(var i in scene)delete scene[i];eval(sceneName+"=null;")}function getMediaByName(e,t){var a=res;return a[e][t]?a[e][t]:null}function b(e,t,a){void 0===a&&(a=!1);var n=res,r=!1,o=new Sprite;if(n[e][t])return a?n[e][t]:(o.graphics.drawTexture(n[e][t]),o);for(var i=0;n[e]["F2xSSIMG"+i];){var s=n[e]["F2xSSIMGData"+i];if(void 0!=s[t]){r=!0;var d=s[t],l=n[e]["F2xSSIMG"+i],c=Texture.createFromTexture(l,d.x,d.y,d.width,d.height);return n[e][t]=c,a?c:(o.graphics.drawTexture(Texture.createFromTexture(l,d.x,d.y,d.width,d.height)),o)}i++}return console.log("未找到资源文件"),null}function d(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null),t&&(void 0!=t.x&&(e.x=t.x),void 0!=t.y&&(e.y=t.y),void 0!=t.a&&(e.scaleX=t.a),void 0!=t.b&&(e.scaleY=t.b),void 0!=t.r&&(e.rotation=t.r),void 0!=t.c&&(e.skewX=t.c),void 0!=t.d&&(e.skewY=t.d),void 0!=t.o&&(e.alpha=t.o),void 0!=t.v&&(e.visible=t.v)),a&&a.length>0&&console.log("Flash2LayaAir还不能很好的支持滤镜功能,如果需要推荐使用Flash2AnnieJS,http://annie2x.com")}function t(e,t,a,n,r,o,i,s,d,l,c,p,u,h,m){void 0===p&&(p=!1),void 0===u&&(u=!1),void 0===h&&(h="single"),void 0===m&&(m=!1);var v;return 0==e||1==e?(v=new laya.display.Text,v.width=s,v.text=t):(v=new laya.display.Input,v.size(s,d),v.nativeInput.placeholder=t),v.overflow=Laya.Text.HIDDEN,v.font=r,v.fontSize=a,v.leading=l-a,v.align=c,v.italic=p,v.bold=u,v.color=n,v.padding=[o,i,o,i],"single"!=h&&(v.wordWrap=!0,e>1&&(v.multiline=!0)),m&&(v.borderColor="#000000"),v}function sb(e,t){var a="_f2x_s"+t;if(res[e][a])return res[e][a];var n=null,r=b(e,t,!0);return r?(n=annie.Shape.convertToImage(r),res[e][a]=n,n):(console.log("error:矢量位图填充时,未找到位图资源!"),null)}function s(e,t,a){var n=new annie.Shape;t&&(0==t.type?n.beginFill(t.color):1==t.type?n.beginRadialGradientFill(t.gradient[0],t.gradient[1],t.points):2==t.type?n.beginLinearGradientFill(t.gradient[0],t.gradient[1],t.points):n.beginBitmapFill(sb(t.bitmapScene,t.bitmapName),t.matrix)),a&&(0==a.type?n.beginStroke(a.color,a.lineWidth,a.caps,a.joints,a.miter):1==a.type?n.beginRadialGradientStroke(a.gradient[0],a.gradient[1],a.points,a.lineWidth,a.caps,a.joints,a.miter):2==a.type?n.beginLinearGradientStroke(a.gradient[0],a.gradient[1],a.points,a.lineWidth,a.caps,a.joints,a.miter):n.beginBitmapStroke(sb(a.bitmapScene,a.bitmapName),a.matrix,a.lineWidth,a.caps,a.joints,a.miter)),0==e.type?n.decodePath(e.data):n.drawRoundRect(e.data.x,e.data.y,e.data.w,e.data.h,e.data.topLeftRadius,e.data.topRightRadius,e.data.bottomLeftRadius,e.data.bottomRightRadius),t&&n.endFill(),a&&n.endStroke();var r=new Sprite;return r._f2xShape=n,r.graphics.drawTexture(n.updateTexture(),n.rect.x,n.rect.y,n.rect.width,n.rect.height),r}function ajax(e){var t=new URLLoader;t.method=void 0==e.type?"get":e.type,t.data=void 0==e.data?null:e.data,t.responseType=void 0==e.responseType?"text":e.responseType,void 0!=e.success&&t.on(Event.COMPLETE,null,e.success),void 0!=e.error&&t.on(Event.ERROR,null,e.error),t.load(e.url)}function jsonp(e,t,a,n){var r=window;1==t&&(r[a]=n),jsonpScript||(jsonpScript=document.createElement("script"),jsonpScript.onload=function(){0==t&&n(r[a]),jsonpScript.src="",r[a]=null,delete r[a]},document.getElementsByTagName("head")[0].appendChild(jsonpScript));var o;o=e.indexOf("?")>0?"&":"?",jsonpScript.src=e+o+"a_n_n_i_e="+Math.random()+"&callback="+a}function m(e,t){t.x-=e.x,t.y-=e.y,e.mask=t}var URLLoader=annie.URLLoader,Event=laya.events.Event,Texture=laya.resource.Texture,Sprite=laya.display.Sprite,_isReleased=!1,res={},_isLoading,_loadSceneNames,_domain,_loadIndex,_totalLoadRes,_loadedLoadRes,_completeCallback,_progressCallback,_JSONQueue,_loaderQueue,_isInited,_currentConfig,_time,_loadPer,_loadSinglePer;Flash2x.loadScene=function(e,t,a,n){if(void 0===n&&(n=""),_isLoading&&(_JSONQueue.loadCancel(),_loaderQueue.loadCancel()),_loadSceneNames=[],void 0==n&&(n=""),_domain=n,"string"==typeof e)isLoadedScene(e)||(_loadSceneNames.push(e),res[e]=new Object);else for(var r=e.length,o=0;r>o;o++)isLoadedScene(e[o])||(res[e[o]]=new Object,_loadSceneNames.push(e[o]));if(0==_loadSceneNames.length)return void(a&&a());if(_isInited||(_time=(new Date).getTime(),_JSONQueue=new URLLoader,_JSONQueue.on(Event.COMPLETE,null,onCFGComplete),_loaderQueue=new URLLoader,_loaderQueue.on(Event.COMPLETE,null,_onRESComplete),_loaderQueue.on(Event.PROGRESS,null,_onRESProgress),_isInited=!0),_loadPer=0,_loadIndex=0,_totalLoadRes=0,_loadedLoadRes=0,_isLoading=!0,_completeCallback=a,_progressCallback=t,_currentConfig=[],_isReleased){_loadIndex=0,_totalLoadRes=_loadSceneNames.length,_loadSinglePer=1/_totalLoadRes;for(var o=0;_totalLoadRes>o;o++)_currentConfig.push([{src:"src/"+_loadSceneNames[o]+".swf"}]);_loadRes()}else _loadConfig()},Flash2x.isLoadedScene=isLoadedScene,Flash2x.unLoadScene=unLoadScene,Flash2x.getMediaByName=getMediaByName,Flash2x.b=b,Flash2x.d=d,Flash2x.t=t,Flash2x.s=s,Flash2x.ajax=ajax;var jsonpScript=null;Flash2x.jsonp=jsonp,Flash2x.m=m,Flash2x.version="1.0.0"}(Flash2x||(Flash2x={}));var globalDispatcher=new laya.events.EventDispatcher,devicePixelRatio=window.devicePixelRatio||1,F2xContainer=laya.display.Sprite,F2xMovieClip=annie.MovieClip;